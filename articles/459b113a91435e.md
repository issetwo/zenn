---
title: "Swift : ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’JSONå½¢å¼ã«å¤‰æ›ã™ã‚‹ï¼ˆé€†ã‚‚ï¼‰"
emoji: "ğŸ‘"
type: "tech"
topics: ["ios", "swift", "json"]
published: true
---

# ç’°å¢ƒ
ã“ã®è¨˜äº‹ã®æƒ…å ±ã¯ä»¥ä¸‹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å‹•ä½œç¢ºèªã—ã¦ã„ã¾ã™ã€‚
- Xcode 12.3 (12C33)
- Swift 5.3.2

# æ¦‚è¦
è¿‘å¹´ã¯ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã—ã¦ JSON ãŒã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚JSONã¯è»½é‡ã§ã‚ã‚Šå¯èª­æ€§ã‚‚é«˜ãã€å¤šãã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ãŒç‰¹å¾´ã§ã™ã€‚
ãã‚“ãª JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã™ãŒã€Swiftã§æ‰±ã†éš›ã«ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚„é€šä¿¡ã‚’è¡Œã†å ´åˆã«ã€æƒ…å ±ã‚’æ ¼ç´ã—ã¦ã„ã‚‹æ§‹é€ ä½“ã‚’JSONå½¢å¼ã«å¤‰æ›ã—ãŸã„å ´åˆãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ä»Šå›ã”ç´¹ä»‹ã™ã‚‹æ–¹æ³•ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ç°¡å˜ã«å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

# Codableãƒ—ãƒ­ãƒˆã‚³ãƒ«
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä»–ã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ã«å¤‰æ›ã™ã‚‹ãŸã‚ã« **Codableãƒ—ãƒ­ãƒˆã‚³ãƒ«** ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚**ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹éš›ã‚„é€šä¿¡ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã™ã‚‹éš›ã«ã€ãƒã‚¤ãƒŠãƒªå½¢å¼ã‚„ç‰¹å®šã®æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹éš›ã«ä½¿ç”¨**ã—ã¾ã™ãŒã€ä»Šå›ã¯ã“ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ç”¨ã—ãŸ Swiftã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆâ‡†JSONå½¢å¼ã®å¤‰æ›æ–¹æ³• ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

ä½¿ç”¨ã™ã‚‹ã«ã¯ **ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã‚’è¡Œã†æ§‹é€ ä½“ã®å‹ãŒ Codableãƒ—ãƒ­ãƒˆã‚³ãƒ« ã«æº–æ‹ **ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã€ä½¿ç”¨ä¾‹ã§ã™ã€‚

```swift
// å•†å“æƒ…å ±æ ¼ç´æ§‹é€ ä½“
struct Goods : Codable{
   var Price: Int          // å€¤æ®µ
   var Name: String        // å•†å“å
   var Category: String    // å•†å“ã‚«ãƒ†ã‚´ãƒªãƒ¼å
}
```

# ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ â†’ Json
å…ˆè¿°ã® Codableãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ãŸ Goodsæ§‹é€ ä½“ã‚’Jsonå½¢å¼ã«å¤‰æ›ã—ã¾ã™ã€‚å¤‰æ›ã™ã‚‹ã«ã¯ã€**JSONEncoderã‚¯ãƒ©ã‚¹ ã® encodeé–¢æ•°** ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ç¬¬ä¸€å¼•æ•°ã¯ã€Goodsæ§‹é€ ä½“ ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ã—ã‹ã—ã€encodeé–¢æ•°ã¯ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ try ã‚’ä»˜ä¸ã—å‘¼ã³å‡ºã—ã¾ã™ã€‚

ä»¥ä¸‹ã€ä½¿ç”¨ä¾‹ã§ã™ã€‚

```swift
// Jsonå¤‰æ›é–¢æ•°
func toJson(goods: Goods) -> Data {
       
    // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰Jsonã«å¤‰æ›
    let encoder = JSONEncoder()
    guard let jsonValue = try? encoder.encode(goods) else {
       fatalError("Failed to encode to JSON.")
    }
       
    return jsonValue;
}
```

# Json â†’ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
å…ˆè¿°ã® Jsonå½¢å¼ã§å‡ºåŠ›ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’Goodsæ§‹é€ ä½“ã«ã—ã¾ã™ã€‚å¤‰æ›ã™ã‚‹ã«ã¯ã€**JSONDecoderã‚¯ãƒ©ã‚¹ ã® decodeé–¢æ•°** ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ç¬¬ä¸€å¼•æ•°ã¯ã€æ§‹é€ ä½“å.self ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ç¬¬äºŒå¼•æ•°ã¯ã€å¤‰æ›å…ƒã®jsonValueï¼ˆDataå‹ï¼‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```swift
// ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¤‰æ›é–¢æ•°
func toObject(jsonValue: Data) -> Goods? {
       
    // Jsonã‹ã‚‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
    let decoder = JSONDecoder()
    guard let goods: Goods = try? decoder.decode(Goods.self, from: jsonValue) else {
       fatalError("Failed to decode from JSON.")
    }
       
    return goods
}
```