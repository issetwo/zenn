---
title: "SwiftUI : Viewã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹"
emoji: "ğŸ”–"
type: "tech"
topics: ["ios", "swift", "swiftui"]
published: true
---

# ç’°å¢ƒ
ã“ã®è¨˜äº‹ã®æƒ…å ±ã¯ä»¥ä¸‹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å‹•ä½œç¢ºèªã—ã¦ã„ã¾ã™ã€‚
- Xcode 12.3 (12C33)
- Swift 5.3.2

# æ¦‚è¦
SwiftUIã®Viewã¯structã§ã‚ã‚‹ãŸã‚ã€é€šå¸¸ã¯ä¿æŒã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ãŒã€ä»¥ä¸‹ã«ç´¹ä»‹ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å®£è¨€æ™‚ã«ä½¿ãˆã‚‹SwiftUIã®ã‚«ã‚¹ã‚¿ãƒ å±æ€§ã‚’ä½¿ã†ã“ã¨ã§å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

- @State
- @ObserverdObjects
- @EnvironmentObject

ã©ã‚Œã‚’ä½¿ç”¨ã—ãŸã‚‰è‰¯ã„ã®ã‹ã¯ã€æ§‹æˆã‚„çŠ¶æ³ã«ã‚‚ã‚ˆã‚‹ãŸã‚å®Ÿè£…ã«åˆã‚ã›ã¦ã†ã¾ãä½¿ã„åˆ†ã‘ã¦ãã ã•ã„ã€‚

# @State
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å®£è¨€æ™‚ã« **@State ã‚’å…ˆé ­ã«ä»˜ä¸ã™ã‚‹ã“ã¨ã§ View ã‹ã‚‰ä½¿ç”¨ãŒå¯èƒ½**ã«ãªã‚Šã¾ã™ã€‚
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å…ˆé ­ã« $ ã‚’ä»˜ä¸ã—ã¾ã™ã€‚

ä»¥ä¸‹ã€ä½¿ç”¨ä¾‹ã§ã™ã€‚

```swift
struct ContentView: View {
   @State var on: Bool = true

   var body: some View {
       VStack {
           Toggle("Switch", isOn: $on)
       }
   }
}
```
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ on ãŒ true ã®å ´åˆã¯ Toggle ãŒONã§è¡¨ç¤ºã•ã‚Œã€
![](https://storage.googleapis.com/zenn-user-upload/e9arqucw3dzbwkt3mz10qzk0hfrr)
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ on ãŒ false ã®å ´åˆã¯ Toggle ãŒOFFã§è¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚
ã“ã‚Œã§ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®çŠ¶æ…‹ãŒ Viewå†…ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
![](https://storage.googleapis.com/zenn-user-upload/iny7f8qzx9yutefj2wt8v8qft402)

# @ObserverdObjects
@State ã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å˜ä¸€ã«è¨­å®šã™ã‚‹ã‚«ã‚¹ãƒ€ãƒ å±æ€§ã§ã™ãŒã€@ObserverdObjects ã¯**ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä¸¸ã”ã¨ã‚’Viewã‹ã‚‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ å±æ€§**ã§ã™ã€‚è¤‡æ•°ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’çŠ¶æ…‹ç®¡ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã«ã€ã“ã¡ã‚‰ã‚’ä½¿ã†ã¨ä¾¿åˆ©ã§ã™ã€‚

@ObserverdObjects ä»˜ä¸ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ **ObservableObjectãƒ—ãƒ­ãƒˆã‚³ãƒ«**ã«æº–æ‹ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ãŸã€ç›£è¦–ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯@Publishedã‚’ä»˜ä¸ã—ã¾ã™ã€‚

ä»¥ä¸‹ã€ä½¿ç”¨ä¾‹ã§ã™ã€‚
```swift
class User : ObservableObject {
   @Published var name: String = "Yamada"
   @Published var age: Int = 30
}

struct UserView: View {
   @ObservedObject var user: User

   var body: some View {
       HStack {
           Text(user.name)
           Text(user.age.description)
       }
   }
}

struct UserView_Previews: PreviewProvider {
   static var previews: some View {
       UserView(user: User())
   }
}
```
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®çŠ¶æ…‹ã‚’ Viewå†…ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
![](https://storage.googleapis.com/zenn-user-upload/dhdn0hevgek84cw032as387n9zy6)
ã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®šç¾©ã™ã‚‹ãŸã‚è¤‡æ•°ã®Viewã§ä½¿ã„å›ã™ã“ã¨ãŒã§ãã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ãŒã€ Viewç”Ÿæˆæ™‚ã« ObserverdObjectã«æº–æ‹ ã—ãŸã‚¯ãƒ©ã‚¹ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

# @EnvironmentObject
@ObserverdObjects ã¨ä¼¼ã¦ã„ã‚‹ã‚«ã‚¹ã‚¿ãƒ å±æ€§ã§ã™ãŒã€ObserverdObject ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§å…±æœ‰å‚ç…§ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ å±æ€§**ã§ã™ã€‚

@EnvironmentObject ä»˜ä¸ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ **ObservableObjectãƒ—ãƒ­ãƒˆã‚³ãƒ«**ã«æº–æ‹ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ãŸã€ç›£è¦–ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯@Publishedã‚’ä»˜ä¸ã—ã¾ã™ã€‚

ä»¥ä¸‹ã€ä½¿ç”¨ä¾‹ã§ã™ã€‚
```swift
class User : ObservableObject {
   @Published var name: String = "Yamada"
   @Published var age: Int = 30
   @Published var height: Double = 175.5
}

struct UserView: View {
   @EnvironmentObject var user: User

   var body: some View {
       HStack {
           Text(user.name)
           Slider(value: self.$user.height, in: 0...200)
       }
   }
}

struct UserView2: View {
   @EnvironmentObject var user: User

   var body: some View {
       HStack {
           Text(self.user.height.description)
       }
   }
}

struct MainView: View {
   var body: some View {
       VStack {
           UserView()
           UserView2()
       }
       .environmentObject(User())
   }
}

@main
struct HelloWorldApp: App {
   var body: some Scene {
       WindowGroup {
           MainView().environmentObject(User())
       }
   }
}â€‹
```
Slider ã¨ Text ã¯ç•°ãªã‚‹View ã§ã‚ã‚‹å ´åˆã«ã€Sliderã‚’å‹•ã‹ã™ã¨ã€
![](https://storage.googleapis.com/zenn-user-upload/2la3tlm88alxnn0qxvdehoyevic7)
åŒãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å‚ç…§ã—ã¦ã„ã‚‹Textã‚‚é€£å‹•ã—ã¦å‹•ä½œã—ã¾ã™ã€‚
æ­£ã—ãç•°ãªã‚‹Viewé–“ã§ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ãŒå…±æœ‰ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/cdt58mqxr9ryrw8ea69xzgwq5722)

# ã¾ã¨ã‚
|  | @State | @ObserverdObjects | @EnvironmentObject |
| ---- | ---- | ---- | ---- |
| ç®¡ç†å¯èƒ½ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æ•°| ï¼‘ã®ã¿ | è¤‡æ•° | è¤‡æ•° |
| ä½¿ç”¨ç¯„å›² | Viewå†… | Viewå†… | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†… |
ä»¥ä¸Šã€SwiftUIã®Viewã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚
ã©ã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã‹ã¯æ§‹æˆã‚„çŠ¶æ³ã«ã‚‚ã‚ˆã‚‹ãŸã‚å®Ÿè£…ã«åˆã‚ã›ã¦æœ€é©ãªå®Ÿè£…æ–¹æ³•ã‚’é¸å®šã—ã¦ãã ã•ã„ã€‚